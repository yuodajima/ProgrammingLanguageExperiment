<!--
     課題4
   -->

<html>
    <head>
	<title>課題4</title>
    </head>
    <body>
	残りチャレンジ回数：<div id="not"></div>
	<h2 style="font-size:5em">
	    <span id="S0">■</span> <span id="S1">■</span> 
	    <span id="S2">■</span> <span id="S3">■</span> <span id="S4">■</span>
	</h2>
	<input type="button" value="start" onclick="setInterval(changeColor, 1000)">

    </body>
    <script type="text/javascript">

     var not = 20;
     document.getElementById("not").innerHTML = not;

     var redClicked = 0;
     var blueClicked = 0;
     var notWait = true;
     var waitTime = 1000;


     function countUp(){
	 if(notWait){
	     redClicked++;
	     not = not+2;
	     document.getElementById("not").innerHTML = not;
	     wait(waitTime);
	 }
     }
     
     function countDown(){
	 if(notWait){
	     blueClicked++;
	     not = not-3;
             document.getElementById("not").innerHTML = not;
	     wait(waitTime);
	     }
     }

     function wait(time){
	 notWait = false;
	 setTimeout(reset, time);

	 function reset(){
	     notWait = true;
	 }
     }

     
     function changeColor(){
	 var color = {
	     0 : "black",
	     1 : "red",
	     2 : "blue"
	 }
	 var func = {
	     0 : "",
	     1 : "countUp()",
	     2 : "countDown()"
	 }
	 
	 for(var i = 0; i < 5; i++){
	     var tri = Math.floor(Math.random() * 3)
	     var button = document.getElementById("S"+i)
	     button.style.color = color[tri]
	     button.onclick = new Function(func[tri])
	 }

	 
	 if(not > 0)
	     document.getElementById("not").innerHTML = --not;
	 else{
	     var comment = "あなたの得点： " + redClicked + "\n"
			 + "赤のクリック回数： " + redClicked + "\n"
			 + "青のクリック回数： " + blueClicked + "\n";
	     window.alert(comment)
	     location.reload();
	 }	     
     }
     
    </script>
</html>
